AMI is standard for packaging applications to consistent and easily programmable packages.

## General

*Ami works in current working directory or in directory specified by `--path=<path>` which will become cwd during ami runtime.*

## Folder structure

- App Root Directory
  - `app.json` or `app.hjson` - application configuration created/configured by user
  - `ami.lua` contains overrides for AMI
  - `model.lua` - contains on setup generated app model (on ami runtime generates `APP.model` object which may be used in template rendering and internal function execution)
  - `specs.json` - specs of top most layer = specs of the application
  - `data` - data directory where should be all application related data stored (not required if it is not possible to implement)
  - `__*` - directories prefixed with `__` contains files related to layers
  - `.ami-templates` - contains file templates (files with names in format `name.extension.template` or `name.template.extension`) which are rendered during `setup --configure`

*Only app.json/app.hjson should be manipulated all other files are autogenerated/AMI managed.*

## Commands

*Unless tagged `(optional)` the bellow functions has to be implemented to comply with AMI.*

**All successful operations has to end with exit code 0. And failed operation with non zero exit code.**

### setup 
Installs the application. Supports `--app` and `--configure` flags. If no flag specified both are executed.
* `--app` - builds application from layers
* `--configure` - configures application based on configuration in `app.json` or `app.hjson`. Anything setup related which depends on configuration should be performed in `--configure` step

### start
Start the application.

### info 
Prints runtime information about the application. This message has to contain:
* `status` - string message
* `level` - `ok`, `warn` or `error` - identifying level of status
* any other fields are optional
`info` has to implement `--json` flag which prints information in json format (in single row - not split with `\n`)

### stop

Stops the application.

### validate

Validates app configuration, environment, platform etc. (If no validation required - may return 0 automatically)

### about 

Prints information about application, its creator and others. 
`about` has to implement `--json` flag which prints about in json format (in single row - not split with `\n`)

### remove
If no flags specified removes application data (`data` folder usually)
Has to support `--all` flag which if specified removes entire application except `app.json` or `app.hjson` (configuration files)

### optional commands
Application specific AMI (`ami.lua`) can specify additional commands based on creator implementation. You can check available commands with `ami --path=<path> --help`.